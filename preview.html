<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelpNexus - Demo Preview</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
        // --- INLINE SVG ICON COMPONENTS ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width={size}
                height={size}
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className={className}
            >
                {children}
            </svg>
        );

        const MapIcon = (props) => <Icon {...props}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"></polygon><line x1="9" y1="3" x2="9" y2="18"></line><line x1="15" y1="6" x2="15" y2="21"></line></Icon>;
        const DollarSign = (props) => <Icon {...props}><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></Icon>;
        const Users = (props) => <Icon {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></Icon>;
        const HandHeart = (props) => <Icon {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.82 2.94 0l.06-.06L12 11l2.94-2.94a2.17 2.17 0 0 1 3.08 0v0c.82.82.82 2.13 0 2.94l-3 3"></path></Icon>;
        const School = (props) => <Icon {...props}><path d="m4 6 8-4 8 4"></path><path d="m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2"></path><path d="M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4"></path><path d="M18 5v17"></path><path d="M6 5v17"></path><path d="M12 5v17"></path></Icon>;
        const LogOut = (props) => <Icon {...props}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></Icon>;
        const Menu = (props) => <Icon {...props}><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></Icon>;
        const X = (props) => <Icon {...props}><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></Icon>;
        const ArrowRight = (props) => <Icon {...props}><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></Icon>;
        const ExternalLink = (props) => <Icon {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></Icon>;
        const Target = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;

        // --- MOCK API & DATA (DEMO VERSION) ---
        const MOCK_DB = {
            needs: [
                { _id: 'need1', title: 'Urgent: Food for 50 families in Park Street area', category: 'food', severity: 5, address: '123 Charity St, Park Street, Kolkata', location: { type: 'Point', coordinates: [88.3577, 22.5533] }, resolved: false, createdAt: new Date(Date.now() - 86400000).toISOString(), assignedNgo: 'ngo1' },
                { _id: 'need2', title: 'School supplies for North Point School', category: 'education', severity: 3, address: '456 Education Ave, Bidhannagar, Kolkata', location: { type: 'Point', coordinates: [88.4021, 22.5801] }, resolved: false, createdAt: new Date(Date.now() - 172800000).toISOString(), assignedNgo: 'ngo1' },
                { _id: 'need4', title: 'Blankets for homeless near Howrah Station', category: 'essentials', severity: 4, address: 'Howrah Station, Howrah', location: { type: 'Point', coordinates: [88.3414, 22.5839] }, resolved: false, createdAt: new Date(Date.now() - 345600000).toISOString(), assignedNgo: 'ngo2' },
                { _id: 'need5', title: 'Textbooks for children in Ballygunge', category: 'education', severity: 2, address: 'Ballygunge, Kolkata', location: { type: 'Point', coordinates: [88.3697, 22.5225] }, resolved: false, createdAt: new Date(Date.now() - 432000000).toISOString(), assignedNgo: 'ngo2' },
                { _id: 'need3', title: 'Medical supplies at Alipore clinic', category: 'health', severity: 4, address: '789 Health Rd, Alipore, Kolkata', location: { type: 'Point', coordinates: [88.3306, 22.5246] }, resolved: true, createdAt: new Date(Date.now() - 259200000).toISOString(), assignedNgo: 'ngo1' },
            ],
            schools: [
                { _id: 'school1', name: 'North Point School', studentsTotal: 150, attendancePercent: 92, mealsToday: 140, location: { coordinates: [88.4021, 22.5801] } },
                { _id: 'school2', name: 'Sunrise Academy', studentsTotal: 210, attendancePercent: 88, mealsToday: 195, location: { coordinates: [88.3697, 22.5225] } },
                { _id: 'school3', name: 'Park English School', studentsTotal: 180, attendancePercent: 95, mealsToday: 175, location: { coordinates: [88.3577, 22.5533] } },
            ],
            users: [
                { _id: 'user1', name: 'Demo User', email: 'user@example.com', role: 'user' },
                { _id: 'user2', name: 'Priya Sharma', email: 'priya@example.com', role: 'user' }
            ],
            ngos: [
                { _id: 'ngo1', name: 'Kolkata Aid Foundation', email: 'ngo@example.com', role: 'ngo' },
                { _id: 'ngo2', name: 'Bengal Relief Services', email: 'bengal.ngo@example.com', role: 'ngo' }
            ],
            programs: [
                { _id: 'prog1', ngoId: 'ngo1', ngoName: 'Kolkata Aid Foundation', title: 'Mid-Day Meal Fund', description: 'Help us provide nutritious meals to 1,000 school children every day.', goal: 50000, collected: 12500 },
                { _id: 'prog2', ngoId: 'ngo1', ngoName: 'Kolkata Aid Foundation', title: 'Winter Blanket Drive', description: 'Provide warm blankets to the homeless during the cold winter months.', goal: 25000, collected: 24800 },
                { _id: 'prog3', ngoId: 'ngo2', ngoName: 'Bengal Relief Services', title: 'Education For All', description: 'Sponsor a child\'s education for a full year.', goal: 100000, collected: 45000 },
            ],
            learningVideos: [
                { id: 'b_4-4_9-wI', title: 'Basic English Conversation', description: 'Learn simple English phrases for daily use.', language: 'Bengali' },
                { id: 'zG656-Q3upM', title: 'Introduction to Computers', description: 'A beginner\'s guide to using a computer.', language: 'Bengali' },
                { id: 'u0ztzUIIj2o', title: 'Learn Hindi Alphabets', description: 'An easy way to learn the Hindi alphabet for beginners.', language: 'Hindi' },
                { id: 'r4BXtEwStlY', title: 'Basic Maths for All Ages', description: 'Simple mathematical concepts explained clearly.', language: 'Hindi' },
                { id: 'LEMid2doypY', title: 'Health and Hygiene Practices', description: 'Learn about important daily hygiene habits.', language: 'Bengali' },
                { id: 'BvY6e_6_vA0', title: 'Financial Literacy Basics', description: 'Understanding savings and basic banking.', language: 'Hindi' }
            ],
            volunteers: [],
            donations: [],
            topNgos: [
                { name: 'HelpAge India', description: 'Dedicated to working for the cause and care of disadvantaged older persons to improve their quality of life.', link: 'https://www.helpageindia.org/' },
                { name: 'CRY (Child Rights and You)', description: 'Works to ensure underprivileged children in India have access to education, healthcare, and protection.', link: 'https://www.cry.org/' },
                { name: 'Goonj', description: 'Addresses basic but neglected issues by turning urban discard into a powerful resource for rural development.', link: 'https://goonj.org/' },
                { name: 'Pratham Education Foundation', description: 'One of the largest NGOs in India, focused on providing quality education to underprivileged children.', link: 'https://www.pratham.org/' },
                { name: 'Smile Foundation', description: 'Works on projects in education, healthcare, livelihood, and women empowerment across 25 states in India.', link: 'https://www.smilefoundationindia.org/' },
                { name: 'Akshaya Patra Foundation', description: 'Runs the world\'s largest mid-day meal program, serving wholesome food to millions of school children.', link: 'https://www.akshayapatra.org/' },
            ]
        };

        const api = {
            login: async (email, password) => {
                const user = MOCK_DB.users.find(u => u.email === email);
                if (user) return { accessToken: 'user-jwt-token', tokenType: 'Bearer', user };
                
                const ngo = MOCK_DB.ngos.find(n => n.email === email);
                if (ngo) return { accessToken: 'ngo-jwt-token', tokenType: 'Bearer', user: ngo };

                throw new Error("Invalid credentials");
            },
            register: async (name, email, password) => {
                const newUser = { _id: `user${MOCK_DB.users.length + 1}`, name, email, role: 'user' };
                MOCK_DB.users.push(newUser);
                return newUser;
            },
            registerNgo: async (formData) => {
                const newNgo = { _id: `ngo${MOCK_DB.ngos.length + 1}`, ...formData, role: 'ngo' };
                MOCK_DB.ngos.push(newNgo);
                return newNgo;
            },
            getSummary: async () => ({
                totalNeeds: 5, unresolvedNeeds: 4, totalDonations: 28500, schoolsCount: 3,
                totalVolunteers28: 18, totalDonations28: 7200, needsResolved28: 1, newUsers28: 32, progress28: 25,
            }),
            listNeeds: async () => {
                await new Promise(res => setTimeout(res, 500));
                return MOCK_DB.needs;
            },
            createNeed: async (needData) => {
                const newNeed = { ...needData, _id: `need${MOCK_DB.needs.length + 1}`, resolved: false, createdAt: new Date().toISOString() };
                MOCK_DB.needs.unshift(newNeed);
                return newNeed;
            },
            resolveNeed: async (id) => {
                const need = MOCK_DB.needs.find(n => n._id === id);
                if (need) need.resolved = true;
                return need;
            },
            listPrograms: async () => {
                await new Promise(res => setTimeout(res, 500));
                return MOCK_DB.programs;
            },
            createProgram: async (programData, ngo) => {
                const newProgram = { ...programData, _id: `prog${MOCK_DB.programs.length + 1}`, ngoId: ngo._id, ngoName: ngo.name, collected: 0 };
                MOCK_DB.programs.push(newProgram);
                return newProgram;
            },
            createDonation: async (donationData) => {
                const donationId = `don${MOCK_DB.donations.length + 1}`;
                const stubPaymentUrl = `upi://pay?pa=soumyajitchaudhury@oksbi&pn=${donationData.programName}&am=${donationData.amount}&tn=Donation%20${donationId}`;
                return { donationId, amount: donationData.amount, paymentUrl: stubPaymentUrl };
            },
            getAllSchools: async () => {
                await new Promise(res => setTimeout(res, 500));
                return MOCK_DB.schools;
            },
            getLearningVideos: async () => {
                await new Promise(res => setTimeout(res, 500));
                return MOCK_DB.learningVideos;
            },
            registerVolunteer: async (volunteerData) => {
                const newVolunteer = { ...volunteerData, _id: `vol${MOCK_DB.volunteers.length + 1}`};
                MOCK_DB.volunteers.push(newVolunteer);
                const user = MOCK_DB.users.find(u => u.email === 'user@example.com');
                if(user) user.role = 'volunteer';
                return newVolunteer;
            },
            matchVolunteers: async (needId) => {
                await new Promise(res => setTimeout(res, 500));
                return [
                    { user: { name: 'Anjali Sharma', email: 'anjali@example.com', phone: '9876543210' }, skills: ['food distribution', 'logistics'] },
                    { user: { name: 'Rohan Verma', email: 'rohan@example.com', phone: '9876543211' }, skills: ['first aid', 'food distribution'] },
                    { user: { name: 'Priya Das', email: 'priya@example.com', phone: '9876543212' }, skills: ['transport', 'cooking'] },
                ];
            },
            getTopNgos: async () => MOCK_DB.topNgos,
        };

        // --- AUTH CONTEXT ---
        const AuthContext = React.createContext(null);

        const AuthProvider = ({ children }) => {
            const [user, setUser] = React.useState(null);
            const [token, setToken] = React.useState(null);
            const [loading, setLoading] = React.useState(true);

            React.useEffect(() => {
                const storedToken = localStorage.getItem('helpnexus_token');
                const storedUser = localStorage.getItem('helpnexus_user');
                if (storedToken && storedUser) {
                    setToken(storedToken);
                    setUser(JSON.parse(storedUser));
                }
                setLoading(false);
            }, []);

            const login = async (email, password) => {
                const response = await api.login(email, password);
                setUser(response.user);
                setToken(response.accessToken);
                localStorage.setItem('helpnexus_user', JSON.stringify(response.user));
                localStorage.setItem('helpnexus_token', response.accessToken);
                return response;
            };

            const logout = () => {
                setUser(null);
                setToken(null);
                localStorage.removeItem('helpnexus_token');
                localStorage.removeItem('helpnexus_user');
            };

            const value = { user, token, login, logout, isAuthenticated: !!token };

            return (
                <AuthContext.Provider value={value}>
                    {!loading && children}
                </AuthContext.Provider>
            );
        };

        const useAuth = () => {
            const context = React.useContext(AuthContext);
            if (context === null) throw new Error("useAuth must be used within an AuthProvider");
            return context;
        };

        // --- UI & LAYOUT COMPONENTS ---
        const Card = ({ children, className = '' }) => <div className={`bg-white rounded-xl shadow-md overflow-hidden p-6 ${className}`}>{children}</div>;
        const Button = ({ children, onClick, className = '', variant = 'primary', type = 'button' }) => {
            const baseClasses = 'px-4 py-2 rounded-lg font-semibold transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2';
            const variants = {
                primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
                secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',
                success: 'bg-green-500 text-white hover:bg-green-600 focus:ring-green-400',
                active: 'bg-blue-600 text-white',
            };
            return <button type={type} onClick={onClick} className={`${baseClasses} ${variants[variant]} ${className}`}>{children}</button>;
        };
        const Input = ({ id, type = 'text', placeholder, value, onChange, required = false }) => <input id={id} name={id} type={type} placeholder={placeholder} value={value} onChange={onChange} required={required} className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />;
        const Message = ({ text, type = 'info' }) => {
            const colors = { info: 'bg-blue-100 border-blue-500 text-blue-700', success: 'bg-green-100 border-green-500 text-green-700', error: 'bg-red-100 border-red-500 text-red-700' };
            if (!text) return null;
            return <div className={`border-l-4 p-4 my-4 rounded-md ${colors[type]}`} role="alert"><p>{text}</p></div>;
        };
        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4"><div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-lg relative"><div className="flex justify-between items-center mb-4"><h2 className="text-xl font-bold">{title}</h2><button onClick={onClose} className="text-gray-500 hover:text-gray-800"><X size={24} /></button></div>{children}</div></div>;
        };
        const StatCard = ({ icon, title, value, color }) => <Card className="flex items-center space-x-4"><div className={`p-3 rounded-full ${color}`}>{icon}</div><div><p className="text-gray-500 text-sm">{title}</p><p className="text-2xl font-bold">{value}</p></div></Card>;
        const Navbar = ({ setPage }) => {
            const { isAuthenticated, user, logout } = useAuth();
            const [isMenuOpen, setIsMenuOpen] = React.useState(false);
            const getHome = () => user ? (user.role === 'ngo' ? 'ngoDashboard' : 'userDashboard') : 'landing';
            const handleLogout = () => { logout(); setPage('landing'); };
            const NavLink = ({ page, children }) => <button onClick={() => { setPage(page); setIsMenuOpen(false); }} className="block md:inline-block mt-4 md:mt-0 text-blue-700 hover:text-blue-900 font-semibold mr-4">{children}</button>;
            return <nav className="bg-white shadow-md p-4 sticky top-0 z-50"><div className="container mx-auto flex items-center justify-between flex-wrap"><div className="flex items-center flex-shrink-0 text-blue-600 mr-6"><HandHeart className="mr-2" /><span className="font-bold text-2xl tracking-tight cursor-pointer" onClick={() => setPage(getHome())}>HelpNexus</span></div><div className="block md:hidden"><button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-blue-600">{isMenuOpen ? <X size={24} /> : <Menu size={24} />}</button></div><div className={`w-full block flex-grow md:flex md:items-center md:w-auto ${isMenuOpen ? 'block' : 'hidden'}`}><div className="text-sm md:flex-grow">{isAuthenticated ? (user.role === 'ngo' ? (<><NavLink page="ngoDashboard">Dashboard</NavLink><NavLink page="ngoPrograms">Manage Programs</NavLink></>) : (<><NavLink page="userDashboard">Dashboard</NavLink><NavLink page="needs">Find Needs</NavLink><NavLink page="schools">Schools</NavLink><NavLink page="learning">Learning</NavLink><NavLink page="donate">Donate</NavLink></>)) : (<><NavLink page="needs">Find Needs</NavLink><NavLink page="learning">Learning</NavLink><NavLink page="donate">Donate</NavLink></>)}</div><div>{isAuthenticated ? (<div className="flex items-center flex-col md:flex-row"><span className="mr-4 text-gray-700 mb-2 md:mb-0">Welcome, {user.name}! ({user.role})</span>{user.role === 'user' && <NavLink page="volunteer">Volunteer</NavLink>}<Button onClick={handleLogout} variant="secondary">Logout</Button></div>) : (<><Button onClick={() => setPage('login')} variant="secondary" className="mr-2 mb-2 md:mb-0 w-full md:w-auto">Login</Button><Button onClick={() => setPage('register')} className="w-full md:w-auto">Get Started</Button></>)}</div></div></div></nav>;
        };
        const Footer = () => <footer className="bg-gray-100 text-center p-4 mt-auto"><p>&copy; {new Date().getFullYear()} HelpNexus. A Hackathon Project.</p></footer>;

        // --- PAGE COMPONENTS ---
        const LandingPage = ({ setPage }) => {
            const [topNgos, setTopNgos] = React.useState([]);
            React.useEffect(() => { api.getTopNgos().then(setTopNgos); }, []);
            const FeatureCard = ({ icon, title, description, page }) => <div onClick={() => setPage(page)} className="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow cursor-pointer text-center transform hover:-translate-y-1"><div className="flex justify-center mb-4 text-blue-600">{icon}</div><h3 className="text-xl font-bold mb-2">{title}</h3><p className="text-gray-600">{description}</p></div>;
            const NgoCard = ({ name, description, link }) => <a href={link} target="_blank" rel="noopener noreferrer" className="block bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow transform hover:-translate-y-1"><div className="flex justify-between items-start"><h3 className="text-xl font-bold mb-2">{name}</h3><ExternalLink className="text-gray-400" size={20} /></div><p className="text-gray-600">{description}</p></a>;
            return <div className="space-y-16"><header className="text-center py-16 bg-blue-50 rounded-lg"><h1 className="text-5xl font-bold text-gray-800">Welcome to HelpNexus</h1><p className="text-xl text-gray-600 mt-4 max-w-2xl mx-auto">Connecting communities, volunteers, and NGOs to create a tangible impact on poverty, hunger, and education.</p><Button onClick={() => setPage('register')} className="mt-8 text-lg px-8 py-3">Get Started <ArrowRight className="inline ml-2" /></Button></header><section><h2 className="text-3xl font-bold text-center mb-8">How You Can Help</h2><div className="grid grid-cols-1 md:grid-cols-3 gap-8"><FeatureCard icon={<MapIcon size={48} />} title="Find & Report Needs" description="See a map of real-time needs in your community or report a new one." page="needs" /><FeatureCard icon={<DollarSign size={48} />} title="Donate Securely" description="Make a direct financial impact through our secure donation portal." page="donate" /><FeatureCard icon={<HandHeart size={48} />} title="Become a Volunteer" description="Join our network of volunteers and lend your skills to a cause." page="register" /></div></section><section><h2 className="text-3xl font-bold text-center mb-8">Top NGOs Making a Difference in India</h2><div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">{topNgos.map(ngo => <NgoCard key={ngo.name} {...ngo} />)}</div></section></div>;
        };
        const UserDashboard = ({ setPage }) => {
            const [summary, setSummary] = React.useState(null);
            React.useEffect(() => { api.getSummary().then(setSummary); }, []);
            if (!summary) return <div className="text-center p-10 font-semibold text-gray-500">Loading Dashboard...</div>;
            return <div className="space-y-6"><h1 className="text-3xl font-bold text-gray-800">Impact Dashboard</h1><div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"><StatCard icon={<MapIcon size={24} className="text-white" />} title="Unresolved Needs" value={summary.unresolvedNeeds} color="bg-red-500" /><StatCard icon={<DollarSign size={24} className="text-white" />} title="Total Donations (INR)" value={`₹${summary.totalDonations.toLocaleString()}`} color="bg-green-500" /><StatCard icon={<Users size={24} className="text-white" />} title="New Users (28 Days)" value={summary.newUsers28} color="bg-blue-500" /><StatCard icon={<School size={24} className="text-white" />} title="Schools Supported" value={summary.schoolsCount} color="bg-yellow-500" /></div><Card><h2 className="text-xl font-bold mb-4">Progress (Last 28 Days)</h2><div className="space-y-4"><p><strong>Needs Resolved:</strong> {summary.needsResolved28}</p><p><strong>Donations Received:</strong> ₹{summary.totalDonations28.toLocaleString()}</p><p><strong>New Volunteers:</strong> {summary.totalVolunteers28}</p><div className="w-full bg-gray-200 rounded-full h-4"><div className="bg-blue-600 h-4 rounded-full" style={{ width: `${summary.progress28}%` }}></div></div><p className="text-right font-semibold">{summary.progress28.toFixed(1)}% of new needs resolved</p></div></Card></div>;
        };
        const NeedsPage = ({ setPage }) => {
            const [needs, setNeeds] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            const { isAuthenticated } = useAuth();
            React.useEffect(() => { api.listNeeds().then(data => { setNeeds(data); setLoading(false); }); }, []);
            return <div className="space-y-6"><div className="flex justify-between items-center"><h1 className="text-3xl font-bold text-gray-800">Community Needs</h1>{isAuthenticated && <Button onClick={() => setPage('reportNeed')}>Report a Need</Button>}</div><Card><h2 className="text-xl font-bold mb-4">Needs Map (Kolkata Area)</h2><div className="bg-gray-200 h-64 rounded-lg relative flex items-center justify-center overflow-hidden"><svg width="100%" height="100%" viewBox="0 0 400 250" className="absolute inset-0"><path d="M0 150 L50 120 L100 160 L150 130 L200 180 L250 150 L300 200 L350 170 L400 220" stroke="#a3bffa" fill="none" strokeWidth="2"/><path d="M0 100 L80 130 L160 90 L240 140 L320 100 L400 150" stroke="#a3bffa" fill="none" strokeWidth="2"/><circle cx="150" cy="130" r="5" fill="#ef4444"/><circle cx="200" cy="180" r="5" fill="#ef4444"/><circle cx="80" cy="130" r="5" fill="#ef4444"/><circle cx="320" cy="100" r="5" fill="#ef4444"/><circle cx="100" cy="160" r="5" fill="#22c55e"/></svg><p className="z-10 bg-white bg-opacity-75 px-4 py-2 rounded-lg font-semibold">Live Map Placeholder</p></div></Card><div className="space-y-4">{loading ? <p className="text-center text-gray-500">Loading needs...</p> : needs.map(need => <Card key={need._id} className={`border-l-4 ${need.resolved ? 'border-green-500' : 'border-red-500'}`}><div className="flex justify-between items-start"><div><h3 className="text-lg font-bold">{need.title}</h3><p className="text-sm text-gray-600">Category: <span className="font-semibold capitalize">{need.category}</span> | Severity: {need.severity}/5</p><p className="text-sm text-gray-500">{need.address}</p><p className="text-xs text-gray-400">Reported on: {new Date(need.createdAt).toLocaleDateString()}</p></div><div className="text-right"><span className={`px-2 py-1 text-xs font-semibold rounded-full ${need.resolved ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>{need.resolved ? 'Resolved' : 'Unresolved'}</span></div></div></Card>)}</div></div>;
        };
        const ReportNeedPage = ({ setPage }) => {
            const [formData, setFormData] = React.useState({ title: '', description: '', category: 'food', severity: 3, address: '' });
            const [message, setMessage] = React.useState('');
            const { isAuthenticated } = useAuth();
            if (!isAuthenticated) return <Message text="You must be logged in to report a need." type="error" />;
            const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });
            const handleSubmit = async (e) => { e.preventDefault(); try { await api.createNeed(formData); setMessage('Need reported successfully! Redirecting...'); setTimeout(() => setPage('needs'), 2000); } catch (error) { setMessage('Failed to report need.'); } };
            return <Card className="max-w-2xl mx-auto"><h1 className="text-2xl font-bold mb-4">Report a New Need</h1><form onSubmit={handleSubmit} className="space-y-4"><div><label htmlFor="title" className="block font-semibold mb-1">Title</label><Input id="title" placeholder="e.g., Urgent food supplies needed" value={formData.title} onChange={handleChange} required /></div><div><label htmlFor="description" className="block font-semibold mb-1">Description</label><textarea id="description" name="description" value={formData.description} onChange={handleChange} className="w-full px-3 py-2 border border-gray-300 rounded-lg" rows="3"></textarea></div><div className="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label htmlFor="category" className="block font-semibold mb-1">Category</label><select id="category" name="category" value={formData.category} onChange={handleChange} className="w-full px-3 py-2 border border-gray-300 rounded-lg"><option value="food">Food</option><option value="education">Education</option><option value="health">Health</option><option value="essentials">Essentials</option><option value="infrastructure">Infrastructure</option></select></div><div><label htmlFor="severity" className="block font-semibold mb-1">Severity (1-5)</label><Input id="severity" type="number" min="1" max="5" value={formData.severity} onChange={handleChange} /></div></div><div><label htmlFor="address" className="block font-semibold mb-1">Address / Location</label><Input id="address" placeholder="e.g., Near Howrah Bridge, Kolkata" value={formData.address} onChange={handleChange} required /></div><Button type="submit">Submit Need</Button><Message text={message} type={message.includes('success') ? 'success' : 'error'} /></form></Card>;
        };
        const DonatePage = () => {
            const [programs, setPrograms] = React.useState([]);
            const [selectedProgram, setSelectedProgram] = React.useState('');
            const [amount, setAmount] = React.useState('100');
            const [name, setName] = React.useState('');
            const [paymentInfo, setPaymentInfo] = React.useState(null);
            const [message, setMessage] = React.useState('');
            const [loading, setLoading] = React.useState(true);
            React.useEffect(() => { api.listPrograms().then(data => { setPrograms(data); setLoading(false); }); }, []);
            const handleSubmit = async (e) => { e.preventDefault(); if (!selectedProgram) { setMessage('Please select a program to donate to.'); return; } setMessage(''); setPaymentInfo(null); try { const programName = programs.find(p => p._id === selectedProgram)?.title; const response = await api.createDonation({ donorName: name, amount, programName }); setPaymentInfo(response); setMessage('Donation link generated! Please scan the QR code or use the link.'); } catch (error) { setMessage('Could not generate donation link. Please try again.'); } };
            return <Card className="max-w-md mx-auto"><h1 className="text-2xl font-bold text-center mb-4">Make a Donation</h1><p className="text-center text-gray-600 mb-6">Your contribution makes a difference!</p>{!paymentInfo ? (<form onSubmit={handleSubmit} className="space-y-4"><div><label htmlFor="program" className="block font-semibold mb-1">Choose a Program</label><select id="program" value={selectedProgram} onChange={(e) => setSelectedProgram(e.target.value)} required className="w-full px-3 py-2 border border-gray-300 rounded-lg"><option value="" disabled>{loading ? 'Loading programs...' : 'Select a cause'}</option>{programs.map(p => <option key={p._id} value={p._id}>{p.title} ({p.ngoName})</option>)}</select></div><div><label htmlFor="name" className="block font-semibold mb-1">Your Name (Optional)</label><Input id="name" placeholder="Anonymous" value={name} onChange={(e) => setName(e.target.value)} /></div><div><label htmlFor="amount" className="block font-semibold mb-1">Amount (INR)</label><Input id="amount" type="number" value={amount} onChange={(e) => setAmount(e.target.value)} required /><div className="flex space-x-2 mt-2">{[100, 250, 500, 1000].map(val => <Button key={val} type="button" onClick={() => setAmount(String(val))} variant="secondary">{val}</Button>)}</div></div><Button type="submit" className="w-full">Generate Payment Link</Button><Message text={message} type={message.includes('success') ? 'success' : 'error'} /></form>) : (<div className="text-center space-y-4"><Message text={message} type="success" /><p><strong>Amount:</strong> ₹{paymentInfo.amount}</p><div className="flex justify-center"><div className="w-48 h-48 bg-gray-200 flex items-center justify-center rounded-lg"><p className="text-gray-500">QR Code Placeholder</p></div></div><a href={paymentInfo.paymentUrl} className="text-blue-600 hover:underline break-all block">{paymentInfo.paymentUrl}</a><Button onClick={() => setPaymentInfo(null)} variant="secondary">Make another donation</Button></div>)}</Card>;
        };
        const SchoolsPage = () => {
            const [schools, setSchools] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            React.useEffect(() => { api.getAllSchools().then(data => { setSchools(data); setLoading(false); }); }, []);
            return <div className="space-y-6"><h1 className="text-3xl font-bold text-gray-800">Supported Schools</h1>{loading ? <p className="text-center text-gray-500">Loading schools...</p> : <div className="grid grid-cols-1 md:grid-cols-2 gap-6">{schools.map(school => <Card key={school._id}><h2 className="text-xl font-bold">{school.name}</h2><p className="text-gray-600">Total Students: {school.studentsTotal}</p><div className="mt-4 space-y-2"><p><strong>Today's Attendance:</strong> {school.attendancePercent}%</p><p><strong>Meals Served Today:</strong> {school.mealsToday}</p></div></Card>)}</div>}</div>;
        };
        const LearningPage = () => {
            const [videos, setVideos] = React.useState([]);
            const [filter, setFilter] = React.useState('All');
            const [loading, setLoading] = React.useState(true);

            React.useEffect(() => {
                api.getLearningVideos().then(data => {
                    setVideos(data);
                    setLoading(false);
                });
            }, []);

            const filteredVideos = filter === 'All' ? videos : videos.filter(v => v.language === filter);

            const VideoCard = ({ videoId, title, description, language }) => (
                <a href={`https://www.youtube.com/watch?v=${videoId}`} target="_blank" rel="noopener noreferrer" className="block bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow transform hover:-translate-y-1 overflow-hidden">
                    <img src={`https://img.youtube.com/vi/${videoId}/mqdefault.jpg`} alt={title} className="w-full h-48 object-cover" />
                    <div className="p-4">
                        <span className={`inline-block px-2 py-1 text-xs font-semibold rounded-full mb-2 ${language === 'Bengali' ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'}`}>{language}</span>
                        <h3 className="font-bold text-lg">{title}</h3>
                        <p className="text-gray-600 text-sm mt-1">{description}</p>
                    </div>
                </a>
            );

            return (
                <div className="space-y-6">
                    <h1 className="text-3xl font-bold text-gray-800">Learning Hub</h1>
                    <div className="flex space-x-2">
                        <Button onClick={() => setFilter('All')} variant={filter === 'All' ? 'primary' : 'secondary'}>All</Button>
                        <Button onClick={() => setFilter('Bengali')} variant={filter === 'Bengali' ? 'primary' : 'secondary'}>Bengali</Button>
                        <Button onClick={() => setFilter('Hindi')} variant={filter === 'Hindi' ? 'primary' : 'secondary'}>Hindi</Button>
                    </div>
                    {loading ? <p className="text-center text-gray-500">Loading videos...</p> : (
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                            {filteredVideos.map(video => <VideoCard key={video.id} videoId={video.id} title={video.title} description={video.description} language={video.language} />)}
                        </div>
                    )}
                </div>
            );
        };
        const VolunteerPage = ({ setPage }) => {
            const [formData, setFormData] = React.useState({ skills: '', availability: 'weekends', address: '', phone: '' });
            const [message, setMessage] = React.useState('');
            const { user } = useAuth();
            if (user?.role === 'volunteer') return <Message text="Thank you! You are already registered as a volunteer." type="success" />;
            if (user?.role === 'ngo') return <Message text="NGO accounts cannot register as individual volunteers." type="info" />;
            const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });
            const handleSubmit = async (e) => { e.preventDefault(); try { await api.registerVolunteer({ ...formData, skills: formData.skills.split(',').map(s => s.trim()) }); setMessage('Registration successful! Your role has been updated.'); setTimeout(() => setPage('userDashboard'), 2000); } catch (error) { setMessage('Registration failed. Please try again.'); } };
            return <Card className="max-w-2xl mx-auto"><h1 className="text-2xl font-bold mb-4">Become a Volunteer</h1><form onSubmit={handleSubmit} className="space-y-4"><div><label htmlFor="skills" className="block font-semibold mb-1">Skills (comma-separated)</label><Input id="skills" placeholder="e.g., Teaching, Cooking, First Aid" value={formData.skills} onChange={handleChange} /></div><div><label htmlFor="availability" className="block font-semibold mb-1">Availability</label><select id="availability" name="availability" value={formData.availability} onChange={handleChange} className="w-full px-3 py-2 border border-gray-300 rounded-lg"><option value="weekdays">Weekdays</option><option value="weekends">Weekends</option><option value="flexible">Flexible</option></select></div><div><label htmlFor="phone" className="block font-semibold mb-1">Phone Number</label><Input id="phone" type="tel" placeholder="Your contact number" value={formData.phone} onChange={handleChange} required /></div><div><label htmlFor="address" className="block font-semibold mb-1">Address</label><Input id="address" placeholder="Your general location for matching" value={formData.address} onChange={handleChange} required /></div><Button type="submit">Register as Volunteer</Button><Message text={message} type={message.includes('success') ? 'success' : 'error'} /></form></Card>;
        };
        const LoginPage = ({ setPage }) => {
            const [formData, setFormData] = React.useState({ email: '', password: '' });
            const [message, setMessage] = React.useState('');
            const { login } = useAuth();
            const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });
            const handleSubmit = async (e) => { e.preventDefault(); try { await login(formData.email, formData.password); } catch (error) { setMessage('Invalid credentials. Please try again.'); } };
            const handleDemoLogin = (email, password) => { setFormData({ email, password }); };
            return <Card className="max-w-md mx-auto"><h1 className="text-2xl font-bold text-center mb-4">Login</h1><form onSubmit={handleSubmit} className="space-y-4"><div><label htmlFor="email">Email</label><Input id="email" type="email" value={formData.email} onChange={handleChange} placeholder="user@example.com" required /></div><div><label htmlFor="password">Password</label><Input id="password" type="password" value={formData.password} onChange={handleChange} placeholder="••••••••" required /></div><Button type="submit" className="w-full">Login</Button><Message text={message} type={message.includes('success') ? 'success' : 'error'} /><p className="text-center text-sm">Don't have an account? <span onClick={() => setPage('register')} className="text-blue-600 cursor-pointer hover:underline">Register here</span>.</p></form><div className="mt-6 border-t pt-4"><h3 className="text-center font-semibold text-gray-600 mb-2">For Demo Presentation</h3><div className="grid grid-cols-2 gap-2"><Button onClick={() => handleDemoLogin('user@example.com', 'password123')} variant="secondary" className="w-full">User 1</Button><Button onClick={() => handleDemoLogin('priya@example.com', 'password123')} variant="secondary" className="w-full">User 2</Button><Button onClick={() => handleDemoLogin('ngo@example.com', 'password123')} variant="secondary" className="w-full">NGO 1</Button><Button onClick={() => handleDemoLogin('bengal.ngo@example.com', 'password123')} variant="secondary" className="w-full">NGO 2</Button></div></div></Card>;
        };
        const RegisterPage = ({ setPage }) => {
            const [isNgo, setIsNgo] = React.useState(false);
            const [userFormData, setUserFormData] = React.useState({ name: '', email: '', password: '' });
            const [ngoFormData, setNgoFormData] = React.useState({ name: '', email: '', password: '', address: '', PIN: '', phone: '' });
            const [message, setMessage] = React.useState('');
            const { login } = useAuth();
            const handleUserChange = (e) => setUserFormData({ ...userFormData, [e.target.name]: e.target.value });
            const handleNgoChange = (e) => setNgoFormData({ ...ngoFormData, [e.target.name]: e.target.value });
            const handleSubmit = async (e) => { e.preventDefault(); setMessage(''); try { if (isNgo) { await api.registerNgo(ngoFormData); setMessage('NGO registration successful! Please login.'); setTimeout(() => setPage('login'), 2000); } else { await api.register(userFormData.name, userFormData.email, userFormData.password); await login(userFormData.email, userFormData.password); } } catch (error) { setMessage('Registration failed. The email might already be in use.'); } };
            return <Card className="max-w-md mx-auto"><h1 className="text-2xl font-bold text-center mb-4">Register</h1><div className="flex justify-center bg-gray-200 rounded-lg p-1 mb-4"><button onClick={() => setIsNgo(false)} className={`w-1/2 py-2 rounded-lg font-semibold ${!isNgo ? 'bg-white shadow' : ''}`}>As a User</button><button onClick={() => setIsNgo(true)} className={`w-1/2 py-2 rounded-lg font-semibold ${isNgo ? 'bg-white shadow' : ''}`}>As an NGO</button></div><form onSubmit={handleSubmit} className="space-y-4">{isNgo ? (<><Input id="name" placeholder="NGO Name" value={ngoFormData.name} onChange={handleNgoChange} required /><Input id="email" type="email" placeholder="ngo-contact@example.com" value={ngoFormData.email} onChange={handleNgoChange} required /><Input id="password" type="password" placeholder="Password" value={ngoFormData.password} onChange={handleNgoChange} required /><Input id="address" placeholder="Full Address" value={ngoFormData.address} onChange={handleNgoChange} required /><Input id="PIN" placeholder="PIN Code" value={ngoFormData.PIN} onChange={handleNgoChange} required /><Input id="phone" type="tel" placeholder="Phone Number" value={ngoFormData.phone} onChange={handleNgoChange} required /></>) : (<><Input id="name" placeholder="Your Name" value={userFormData.name} onChange={handleUserChange} required /><Input id="email" type="email" placeholder="your-email@example.com" value={userFormData.email} onChange={handleUserChange} required /><Input id="password" type="password" placeholder="Password" value={userFormData.password} onChange={handleUserChange} required /></>)}<Button type="submit" className="w-full">Register</Button><Message text={message} type={message.includes('success') ? 'success' : 'error'} /><p className="text-center text-sm">Already have an account? <span onClick={() => setPage('login')} className="text-blue-600 cursor-pointer hover:underline">Login here</span>.</p></form></Card>;
        };
        const NgoDashboard = ({ setPage }) => {
            const { user } = useAuth();
            const [stats, setStats] = React.useState(null);
            const [needs, setNeeds] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            const [isModalOpen, setIsModalOpen] = React.useState(false);
            const [matchedVolunteers, setMatchedVolunteers] = React.useState([]);
            const [selectedNeedTitle, setSelectedNeedTitle] = React.useState('');

            React.useEffect(() => { 
                const fetchNgoData = async () => {
                    setLoading(true);
                    const allNeeds = await api.listNeeds();
                    const myNeeds = allNeeds.filter(n => n.assignedNgo === user._id && !n.resolved);
                    const allPrograms = await api.listPrograms();
                    const myPrograms = allPrograms.filter(p => p.ngoId === user._id);
                    setStats({ needs: myNeeds.length, programs: myPrograms.length, volunteers: 18 });
                    setNeeds(myNeeds);
                    setLoading(false);
                };
                fetchNgoData();
            }, [user]);
            
            const handleResolve = async (id) => {
                await api.resolveNeed(id);
                setNeeds(needs.filter(n => n._id !== id));
            };

            const handleMatch = async (need) => {
                setMatchedVolunteers([]);
                setSelectedNeedTitle(need.title);
                setIsModalOpen(true);
                const matches = await api.matchVolunteers(need._id);
                setMatchedVolunteers(matches);
            };

            if (loading || !stats) return <p className="text-center text-gray-500">Loading NGO Portal...</p>;

            return <div className="space-y-6">
                <h1 className="text-3xl font-bold text-gray-800">NGO Dashboard</h1>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <StatCard icon={<HandHeart size={24} className="text-white" />} title="Active Needs" value={stats.needs} color="bg-red-500" />
                    <StatCard icon={<Target size={24} className="text-white" />} title="Fundraising Programs" value={stats.programs} color="bg-green-500" />
                    <StatCard icon={<Users size={24} className="text-white" />} title="Matched Volunteers" value={stats.volunteers} color="bg-blue-500" />
                </div>
                <div>
                    <h2 className="text-2xl font-bold text-gray-800 my-6">Manage Unresolved Needs</h2>
                    <div className="space-y-4">
                        {needs.length === 0 ? <Message text="There are currently no unresolved needs assigned to your NGO." type="info" /> : (
                            needs.map(need => (
                                <Card key={need._id} className="border-l-4 border-red-500">
                                    <div>
                                        <h3 className="text-lg font-bold">{need.title}</h3>
                                        <p className="text-sm text-gray-600">Category: <span className="font-semibold capitalize">{need.category}</span> | Severity: {need.severity}/5</p>
                                        <p className="text-sm text-gray-500">{need.address}</p>
                                    </div>
                                    <div className="mt-4 flex space-x-2">
                                        <Button onClick={() => handleResolve(need._id)} variant="success">Mark as Resolved</Button>
                                        <Button onClick={() => handleMatch(need)} variant="secondary">Match Volunteers</Button>
                                    </div>
                                </Card>
                            ))
                        )}
                    </div>
                </div>
                <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title={`Matched Volunteers for "${selectedNeedTitle}"`}>
                    {matchedVolunteers.length > 0 ? (
                        <ul className="space-y-3">
                            {matchedVolunteers.map((v, index) => (
                                <li key={index} className="p-3 bg-gray-100 rounded-lg">
                                    <p className="font-bold">{v.user.name}</p>
                                    <p className="text-sm text-gray-600">{v.user.email} | {v.user.phone}</p>
                                    <p className="text-sm mt-1">Skills: <span className="font-semibold">{v.skills.join(', ')}</span></p>
                                </li>
                            ))}
                        </ul>
                    ) : (
                        <p className="text-center text-gray-500">Searching for volunteers...</p>
                    )}
                </Modal>
            </div>;
        };
        const NgoProgramsPage = () => {
            const [programs, setPrograms] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            const [isModalOpen, setIsModalOpen] = React.useState(false);
            const [newProgramData, setNewProgramData] = React.useState({ title: '', description: '', goal: '' });
            const { user } = useAuth();
            React.useEffect(() => { api.listPrograms().then(data => { setPrograms(data.filter(p => p.ngoId === user._id)); setLoading(false); }); }, [user]);
            const handleCreateProgram = async (e) => { e.preventDefault(); const newProgram = await api.createProgram(newProgramData, user); setPrograms([...programs, newProgram]); setIsModalOpen(false); setNewProgramData({ title: '', description: '', goal: '' }); };
            const handleChange = (e) => setNewProgramData({ ...newProgramData, [e.target.name]: e.target.value });
            return <div className="space-y-6"><div className="flex justify-between items-center"><h1 className="text-3xl font-bold text-gray-800">Manage Fundraising Programs</h1><Button onClick={() => setIsModalOpen(true)}>Create New Program</Button></div>{loading ? <p className="text-center text-gray-500">Loading programs...</p> : <div className="space-y-4">{programs.length === 0 ? <Message text="You have not created any fundraising programs yet." type="info" /> : programs.map(program => <Card key={program._id}><h2 className="text-xl font-bold">{program.title}</h2><p className="text-gray-600 my-2">{program.description}</p><div className="w-full bg-gray-200 rounded-full h-2.5"><div className="bg-green-600 h-2.5 rounded-full" style={{ width: `${(program.collected / program.goal) * 100}%` }}></div></div><p className="text-sm text-gray-500 mt-1">₹{program.collected.toLocaleString()} raised of ₹{program.goal.toLocaleString()} goal</p></Card>)}</div>}<Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title="Create New Program"><form onSubmit={handleCreateProgram} className="space-y-4"><Input id="title" placeholder="Program Title" value={newProgramData.title} onChange={handleChange} required /><textarea name="description" placeholder="Brief description of the cause" value={newProgramData.description} onChange={handleChange} required className="w-full px-3 py-2 border border-gray-300 rounded-lg" rows="3"></textarea><Input id="goal" type="number" placeholder="Fundraising Goal (INR)" value={newProgramData.goal} onChange={handleChange} required /><Button type="submit" className="w-full">Create Program</Button></form></Modal></div>;
        };
        
        // --- APP ---
        const AppContent = () => {
            const [page, setPage] = React.useState('landing');
            const { user, isAuthenticated } = useAuth();
            React.useEffect(() => { if (isAuthenticated) { if (user.role === 'ngo') { setPage('ngoDashboard'); } else { setPage('userDashboard'); } } else { setPage('landing'); } }, [isAuthenticated, user]);
            const renderPage = () => {
                switch (page) {
                    case 'landing': return <LandingPage setPage={setPage} />;
                    case 'userDashboard': return <UserDashboard />;
                    case 'needs': return <NeedsPage setPage={setPage} />;
                    case 'reportNeed': return <ReportNeedPage setPage={setPage} />;
                    case 'donate': return <DonatePage />;
                    case 'schools': return <SchoolsPage />;
                    case 'learning': return <LearningPage />;
                    case 'volunteer': return <VolunteerPage setPage={setPage} />;
                    case 'login': return <LoginPage setPage={setPage} />;
                    case 'register': return <RegisterPage setPage={setPage} />;
                    case 'ngoDashboard': return <NgoDashboard setPage={setPage} />;
                    case 'ngoPrograms': return <NgoProgramsPage setPage={setPage} />;
                    default: return <LandingPage setPage={setPage} />;
                }
            };
            return <div className="bg-gray-50 min-h-screen font-sans text-gray-900 flex flex-col"><Navbar setPage={setPage} /><main className="container mx-auto p-4 md:p-6 flex-grow">{renderPage()}</main><Footer /></div>;
        };

        const App = () => <AuthProvider><AppContent /></AuthProvider>;

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
